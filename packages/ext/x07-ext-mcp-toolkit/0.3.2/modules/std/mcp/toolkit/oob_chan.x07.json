{"decls":[{"kind":"export","names":["std.mcp.toolkit.oob_chan.write_jsonl_v1"]},{"body":["begin",["let","k",["bytes.lit","x07McpOobChanHandle"]],["let","doc_b",["ext.json.data_model.parse","ctx_json"]],["let","doc",["bytes.view","doc_b"]],["if",["=",["ext.data_model.doc_is_err","doc"],1],["return",-1],0],["if",["!=",["ext.data_model.root_kind","doc"],5],["return",-1],0],["let","root",["ext.data_model.root_offset","doc"]],["let","off",["ext.data_model.map_find","doc","root",["bytes.view","k"]]],["if",["<","off",0],["return",-1],0],["if",["!=",["ext.data_model.kind_at","doc","off"],2],["return",-1],0],["let","num_b",["ext.data_model.number_get","doc","off"]],["std.mcp.toolkit.oob_chan._parse_i32_or_neg1_v1",["bytes.view","num_b"]]],"kind":"defn","name":"std.mcp.toolkit.oob_chan._handle_from_ctx_v1","params":[{"name":"ctx_json","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","st",["std.parse.i32_status_le","b"]],["if",["if",[">=u",["bytes.len","st"],5],["=",["bytes.get_u8","st",0],1],0],["codec.read_u32_le","st",1],-1]],"kind":"defn","name":"std.mcp.toolkit.oob_chan._parse_i32_or_neg1_v1","params":[{"name":"b","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","handle",["std.mcp.toolkit.oob_chan._handle_from_ctx_v1","ctx_json"]],["if",[">=","handle",0],["begin",["let","sent",["chan.bytes.try_send","handle","json"]],["if",["=","sent",1],1,0]],["std.mcp.toolkit.jsonl_stdout.write_v1","json"]]],"kind":"defn","name":"std.mcp.toolkit.oob_chan.write_jsonl_v1","params":[{"name":"ctx_json","ty":"bytes_view"},{"name":"json","ty":"bytes_view"}],"result":"i32"}],"imports":["ext.data_model","ext.json.data_model","std.bytes","std.codec","std.mcp.toolkit.jsonl_stdout","std.parse"],"kind":"module","module_id":"std.mcp.toolkit.oob_chan","schema_version":"x07.x07ast@0.5.0"}
