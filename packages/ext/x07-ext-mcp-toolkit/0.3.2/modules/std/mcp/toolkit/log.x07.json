{"decls":[{"kind":"export","names":["std.mcp.toolkit.log.debug_v1","std.mcp.toolkit.log.emit_v1","std.mcp.toolkit.log.error_v1","std.mcp.toolkit.log.info_v1","std.mcp.toolkit.log.notice_v1","std.mcp.toolkit.log.warning_v1"]},{"body":["begin",["let","level",["bytes.lit","debug"]],["std.mcp.toolkit.log.emit_v1","ctx_json",["bytes.view","level"],"logger_opt","data_json"]],"kind":"defn","name":"std.mcp.toolkit.log.debug_v1","params":[{"name":"ctx_json","ty":"bytes_view"},{"name":"logger_opt","ty":"option_bytes"},{"name":"data_json","ty":"bytes_view"}],"result":"result_i32"},{"body":["begin",["let","_",["view.to_bytes","ctx_json"]],["if",["=",["std.mcp.logging.level_is_valid_v1","level_str"],1],0,["return",["result_i32.err",1]]],["let","lit_null",["bytes.lit","null"]],["let","data_b","lit_null"],["if",[">",["view.len","data_json"],0],["begin",["let","canon",["ext.json.canon.canonicalize","data_json"]],["if",[">",["bytes.len",["bytes.view","canon"]],0],["begin",["set","data_b","canon"],0],0],0],0],["let","data_v",["bytes.view","data_b"]],["let","logger_b",["option_bytes.unwrap_or","logger_opt",["bytes.alloc",0]]],["let","has_logger",[">",["bytes.len","logger_b"],0]],["let","lit_prefix",["bytes.lit","{\"jsonrpc\":\"2.0\",\"method\":\"x07.mcp/internal/oob/log_message\",\"params\":{\"level\":\""]],["let","lit_after_level",["bytes.lit","\",\"data\":"]],["let","lit_logger",["bytes.lit",",\"logger\":\""]],["let","lit_quote",["bytes.lit","\""]],["let","lit_end",["bytes.lit","}}"]],["let","cap",["+",96,["+",["view.len","level_str"],["+",["view.len","data_v"],["bytes.len","logger_b"]]]]],["let","buf",["vec_u8.with_capacity","cap"]],["set","buf",["vec_u8.extend_bytes","buf",["bytes.view","lit_prefix"]]],["set","buf",["vec_u8.extend_bytes","buf","level_str"]],["set","buf",["vec_u8.extend_bytes","buf",["bytes.view","lit_after_level"]]],["set","buf",["vec_u8.extend_bytes","buf","data_v"]],["if",["=","has_logger",1],["begin",["set","buf",["vec_u8.extend_bytes","buf",["bytes.view","lit_logger"]]],["set","buf",["vec_u8.extend_bytes","buf","logger_b"]],["set","buf",["vec_u8.extend_bytes","buf",["bytes.view","lit_quote"]]],0],0],["set","buf",["vec_u8.extend_bytes","buf",["bytes.view","lit_end"]]],["let","json",["vec_u8.into_bytes","buf"]],["if",["=",["bytes.len",["bytes.view","json"]],0],["return",["result_i32.err",2]],0],["let","ok",["std.mcp.toolkit.oob_chan.write_jsonl_v1","ctx_json",["bytes.view","json"]]],["if",["=","ok",1],["result_i32.ok",0],["result_i32.err",3]]],"kind":"defn","name":"std.mcp.toolkit.log.emit_v1","params":[{"name":"ctx_json","ty":"bytes_view"},{"name":"level_str","ty":"bytes_view"},{"name":"logger_opt","ty":"option_bytes"},{"name":"data_json","ty":"bytes_view"}],"result":"result_i32"},{"body":["begin",["let","level",["bytes.lit","error"]],["std.mcp.toolkit.log.emit_v1","ctx_json",["bytes.view","level"],"logger_opt","data_json"]],"kind":"defn","name":"std.mcp.toolkit.log.error_v1","params":[{"name":"ctx_json","ty":"bytes_view"},{"name":"logger_opt","ty":"option_bytes"},{"name":"data_json","ty":"bytes_view"}],"result":"result_i32"},{"body":["begin",["let","level",["bytes.lit","info"]],["std.mcp.toolkit.log.emit_v1","ctx_json",["bytes.view","level"],"logger_opt","data_json"]],"kind":"defn","name":"std.mcp.toolkit.log.info_v1","params":[{"name":"ctx_json","ty":"bytes_view"},{"name":"logger_opt","ty":"option_bytes"},{"name":"data_json","ty":"bytes_view"}],"result":"result_i32"},{"body":["begin",["let","level",["bytes.lit","notice"]],["std.mcp.toolkit.log.emit_v1","ctx_json",["bytes.view","level"],"logger_opt","data_json"]],"kind":"defn","name":"std.mcp.toolkit.log.notice_v1","params":[{"name":"ctx_json","ty":"bytes_view"},{"name":"logger_opt","ty":"option_bytes"},{"name":"data_json","ty":"bytes_view"}],"result":"result_i32"},{"body":["begin",["let","level",["bytes.lit","warning"]],["std.mcp.toolkit.log.emit_v1","ctx_json",["bytes.view","level"],"logger_opt","data_json"]],"kind":"defn","name":"std.mcp.toolkit.log.warning_v1","params":[{"name":"ctx_json","ty":"bytes_view"},{"name":"logger_opt","ty":"option_bytes"},{"name":"data_json","ty":"bytes_view"}],"result":"result_i32"}],"imports":["ext.data_model","ext.json.canon","std.bytes","std.codec","std.mcp.logging","std.mcp.toolkit.oob_chan","std.mcp.util.json"],"kind":"module","module_id":"std.mcp.toolkit.log","schema_version":"x07.x07ast@0.5.0"}
