{"decls":[{"kind":"export","names":["std.mcp.sandbox.task_store_any_v1.cursor_decode_v1","std.mcp.sandbox.task_store_any_v1.cursor_encode_v1","std.mcp.sandbox.task_store_any_v1.get_task_args_json_v1","std.mcp.sandbox.task_store_any_v1.get_task_json_v1","std.mcp.sandbox.task_store_any_v1.get_task_progress_token_json_v1","std.mcp.sandbox.task_store_any_v1.get_task_request_id_json_v1","std.mcp.sandbox.task_store_any_v1.get_task_result_json_v1","std.mcp.sandbox.task_store_any_v1.get_task_status_v1","std.mcp.sandbox.task_store_any_v1.get_task_ticks_done_v1","std.mcp.sandbox.task_store_any_v1.get_task_tool_name_v1","std.mcp.sandbox.task_store_any_v1.get_task_value_v1","std.mcp.sandbox.task_store_any_v1.list_tasks_json_v1","std.mcp.sandbox.task_store_any_v1.new_sqlite_v1","std.mcp.sandbox.task_store_any_v1.new_v1","std.mcp.sandbox.task_store_any_v1.put_tool_task_new_v1","std.mcp.sandbox.task_store_any_v1.set_task_cancelled_v1","std.mcp.sandbox.task_store_any_v1.set_task_completed_v1","std.mcp.sandbox.task_store_any_v1.set_task_failed_with_result_v1","std.mcp.sandbox.task_store_any_v1.set_task_working_step_v1"]},{"body":["begin",["if",["<",["view.len","store"],12],["return",0],0],["if",["!=",["codec.read_u32_le","store",0],1],["return",0],0],["let","inner_len",["codec.read_u32_le","store",8]],["if",["<","inner_len",0],["return",0],0],["if",["<u",["view.len","store"],["+",12,"inner_len"]],["return",0],0],1],"kind":"defn","name":"std.mcp.sandbox.task_store_any_v1._hdr_ok_v1","params":[{"name":"store","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["if",["=",["std.mcp.sandbox.task_store_any_v1._hdr_ok_v1","store"],1],0,["return",["bytes.alloc",0]]],["let","inner_len",["codec.read_u32_le","store",8]],["view.to_bytes",["view.slice","store",12,"inner_len"]]],"kind":"defn","name":"std.mcp.sandbox.task_store_any_v1._inner_bytes_v1","params":[{"name":"store","ty":"bytes_view"}],"result":"bytes"},{"body":["if",["=",["std.mcp.sandbox.task_store_any_v1._hdr_ok_v1","store"],1],["codec.read_u32_le","store",4],0],"kind":"defn","name":"std.mcp.sandbox.task_store_any_v1._kind_v1","params":[{"name":"store","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","n",["view.len","inner"]],["let","out",["vec_u8.with_capacity",["+",12,"n"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le",1]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","kind"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","n"]]],["if",[">","n",0],["begin",["set","out",["vec_u8.extend_bytes","out","inner"]],0],0],["vec_u8.into_bytes","out"]],"kind":"defn","name":"std.mcp.sandbox.task_store_any_v1._wrap_v1","params":[{"name":"kind","ty":"i32"},{"name":"inner","ty":"bytes_view"}],"result":"bytes"},{"body":["std.mcp.sandbox.task_store_mem_v1.cursor_decode_v1","auth_context_id","cursor_b64"],"kind":"defn","name":"std.mcp.sandbox.task_store_any_v1.cursor_decode_v1","params":[{"name":"auth_context_id","ty":"bytes_view"},{"name":"cursor_b64","ty":"bytes_view"}],"result":"result_i32"},{"body":["std.mcp.sandbox.task_store_mem_v1.cursor_encode_v1","auth_context_id","offset"],"kind":"defn","name":"std.mcp.sandbox.task_store_any_v1.cursor_encode_v1","params":[{"name":"auth_context_id","ty":"bytes_view"},{"name":"offset","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","k",["std.mcp.sandbox.task_store_any_v1._kind_v1","store"]],["let","inner_b",["std.mcp.sandbox.task_store_any_v1._inner_bytes_v1","store"]],["let","inner",["bytes.view","inner_b"]],["if",["=","k",1],["std.mcp.sandbox.task_store_sqlite_v1.get_task_args_json_v1","inner","auth_context_id","task_id"],["std.mcp.sandbox.task_store_mem_v1.get_task_args_json_v1","inner","auth_context_id","task_id"]]],"kind":"defn","name":"std.mcp.sandbox.task_store_any_v1.get_task_args_json_v1","params":[{"name":"store","ty":"bytes_view"},{"name":"auth_context_id","ty":"bytes_view"},{"name":"task_id","ty":"bytes_view"}],"result":"result_bytes"},{"body":["begin",["let","k",["std.mcp.sandbox.task_store_any_v1._kind_v1","store"]],["let","inner_b",["std.mcp.sandbox.task_store_any_v1._inner_bytes_v1","store"]],["let","inner",["bytes.view","inner_b"]],["if",["=","k",1],["std.mcp.sandbox.task_store_sqlite_v1.get_task_json_v1","inner","auth_context_id","task_id"],["std.mcp.sandbox.task_store_mem_v1.get_task_json_v1","inner","auth_context_id","task_id"]]],"kind":"defn","name":"std.mcp.sandbox.task_store_any_v1.get_task_json_v1","params":[{"name":"store","ty":"bytes_view"},{"name":"auth_context_id","ty":"bytes_view"},{"name":"task_id","ty":"bytes_view"}],"result":"result_bytes"},{"body":["begin",["let","k",["std.mcp.sandbox.task_store_any_v1._kind_v1","store"]],["let","inner_b",["std.mcp.sandbox.task_store_any_v1._inner_bytes_v1","store"]],["let","inner",["bytes.view","inner_b"]],["if",["=","k",1],["std.mcp.sandbox.task_store_sqlite_v1.get_task_progress_token_json_v1","inner","auth_context_id","task_id"],["std.mcp.sandbox.task_store_mem_v1.get_task_progress_token_json_v1","inner","auth_context_id","task_id"]]],"kind":"defn","name":"std.mcp.sandbox.task_store_any_v1.get_task_progress_token_json_v1","params":[{"name":"store","ty":"bytes_view"},{"name":"auth_context_id","ty":"bytes_view"},{"name":"task_id","ty":"bytes_view"}],"result":"result_bytes"},{"body":["begin",["let","k",["std.mcp.sandbox.task_store_any_v1._kind_v1","store"]],["let","inner_b",["std.mcp.sandbox.task_store_any_v1._inner_bytes_v1","store"]],["let","inner",["bytes.view","inner_b"]],["if",["=","k",1],["std.mcp.sandbox.task_store_sqlite_v1.get_task_request_id_json_v1","inner","auth_context_id","task_id"],["std.mcp.sandbox.task_store_mem_v1.get_task_request_id_json_v1","inner","auth_context_id","task_id"]]],"kind":"defn","name":"std.mcp.sandbox.task_store_any_v1.get_task_request_id_json_v1","params":[{"name":"store","ty":"bytes_view"},{"name":"auth_context_id","ty":"bytes_view"},{"name":"task_id","ty":"bytes_view"}],"result":"result_bytes"},{"body":["begin",["let","k",["std.mcp.sandbox.task_store_any_v1._kind_v1","store"]],["let","inner_b",["std.mcp.sandbox.task_store_any_v1._inner_bytes_v1","store"]],["let","inner",["bytes.view","inner_b"]],["if",["=","k",1],["std.mcp.sandbox.task_store_sqlite_v1.get_task_result_json_v1","inner","auth_context_id","task_id"],["std.mcp.sandbox.task_store_mem_v1.get_task_result_json_v1","inner","auth_context_id","task_id"]]],"kind":"defn","name":"std.mcp.sandbox.task_store_any_v1.get_task_result_json_v1","params":[{"name":"store","ty":"bytes_view"},{"name":"auth_context_id","ty":"bytes_view"},{"name":"task_id","ty":"bytes_view"}],"result":"result_bytes"},{"body":["begin",["let","k",["std.mcp.sandbox.task_store_any_v1._kind_v1","store"]],["let","inner_b",["std.mcp.sandbox.task_store_any_v1._inner_bytes_v1","store"]],["let","inner",["bytes.view","inner_b"]],["if",["=","k",1],["std.mcp.sandbox.task_store_sqlite_v1.get_task_status_v1","inner","auth_context_id","task_id"],["std.mcp.sandbox.task_store_mem_v1.get_task_status_v1","inner","auth_context_id","task_id"]]],"kind":"defn","name":"std.mcp.sandbox.task_store_any_v1.get_task_status_v1","params":[{"name":"store","ty":"bytes_view"},{"name":"auth_context_id","ty":"bytes_view"},{"name":"task_id","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","k",["std.mcp.sandbox.task_store_any_v1._kind_v1","store"]],["let","inner_b",["std.mcp.sandbox.task_store_any_v1._inner_bytes_v1","store"]],["let","inner",["bytes.view","inner_b"]],["if",["=","k",1],["std.mcp.sandbox.task_store_sqlite_v1.get_task_ticks_done_v1","inner","auth_context_id","task_id"],["std.mcp.sandbox.task_store_mem_v1.get_task_ticks_done_v1","inner","auth_context_id","task_id"]]],"kind":"defn","name":"std.mcp.sandbox.task_store_any_v1.get_task_ticks_done_v1","params":[{"name":"store","ty":"bytes_view"},{"name":"auth_context_id","ty":"bytes_view"},{"name":"task_id","ty":"bytes_view"}],"result":"result_i32"},{"body":["begin",["let","k",["std.mcp.sandbox.task_store_any_v1._kind_v1","store"]],["let","inner_b",["std.mcp.sandbox.task_store_any_v1._inner_bytes_v1","store"]],["let","inner",["bytes.view","inner_b"]],["if",["=","k",1],["std.mcp.sandbox.task_store_sqlite_v1.get_task_tool_name_v1","inner","auth_context_id","task_id"],["std.mcp.sandbox.task_store_mem_v1.get_task_tool_name_v1","inner","auth_context_id","task_id"]]],"kind":"defn","name":"std.mcp.sandbox.task_store_any_v1.get_task_tool_name_v1","params":[{"name":"store","ty":"bytes_view"},{"name":"auth_context_id","ty":"bytes_view"},{"name":"task_id","ty":"bytes_view"}],"result":"result_bytes"},{"body":["begin",["let","k",["std.mcp.sandbox.task_store_any_v1._kind_v1","store"]],["let","inner_b",["std.mcp.sandbox.task_store_any_v1._inner_bytes_v1","store"]],["let","inner",["bytes.view","inner_b"]],["if",["=","k",1],["std.mcp.sandbox.task_store_sqlite_v1.get_task_value_v1","inner","auth_context_id","task_id"],["std.mcp.sandbox.task_store_mem_v1.get_task_value_v1","inner","auth_context_id","task_id"]]],"kind":"defn","name":"std.mcp.sandbox.task_store_any_v1.get_task_value_v1","params":[{"name":"store","ty":"bytes_view"},{"name":"auth_context_id","ty":"bytes_view"},{"name":"task_id","ty":"bytes_view"}],"result":"result_bytes"},{"body":["begin",["let","k",["std.mcp.sandbox.task_store_any_v1._kind_v1","store"]],["let","inner_b",["std.mcp.sandbox.task_store_any_v1._inner_bytes_v1","store"]],["let","inner",["bytes.view","inner_b"]],["if",["=","k",1],["std.mcp.sandbox.task_store_sqlite_v1.list_tasks_json_v1","inner","auth_context_id","cursor_b64","limit"],["std.mcp.sandbox.task_store_mem_v1.list_tasks_json_v1","inner","auth_context_id","cursor_b64","limit"]]],"kind":"defn","name":"std.mcp.sandbox.task_store_any_v1.list_tasks_json_v1","params":[{"name":"store","ty":"bytes_view"},{"name":"auth_context_id","ty":"bytes_view"},{"name":"cursor_b64","ty":"bytes_view"},{"name":"limit","ty":"i32"}],"result":"result_bytes"},{"body":["begin",["let","res",["std.mcp.sandbox.task_store_sqlite_v1.new_v1","db_path","max_tasks"]],["if",["!=",["result_bytes.err_code","res"],0],["return","res"],0],["let","inner",["result_bytes.unwrap_or","res",["bytes.alloc",0]]],["result_bytes.ok",["std.mcp.sandbox.task_store_any_v1._wrap_v1",1,["bytes.view","inner"]]]],"kind":"defn","name":"std.mcp.sandbox.task_store_any_v1.new_sqlite_v1","params":[{"name":"db_path","ty":"bytes_view"},{"name":"max_tasks","ty":"i32"}],"result":"result_bytes"},{"body":["begin",["let","inner",["std.mcp.sandbox.task_store_mem_v1.new_v1","max_tasks"]],["std.mcp.sandbox.task_store_any_v1._wrap_v1",0,["bytes.view","inner"]]],"kind":"defn","name":"std.mcp.sandbox.task_store_any_v1.new_v1","params":[{"name":"max_tasks","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","sv",["bytes.view","store"]],["let","k",["std.mcp.sandbox.task_store_any_v1._kind_v1","sv"]],["let","inner",["std.mcp.sandbox.task_store_any_v1._inner_bytes_v1","sv"]],["let","inner2",["if",["=","k",1],["std.mcp.sandbox.task_store_sqlite_v1.put_tool_task_new_v1","inner","auth_context_id","task_id","created_at","last_updated_at","ttl_ms","poll_ms","request_id_json","progress_token_json","tool_name","args_json"],["std.mcp.sandbox.task_store_mem_v1.put_tool_task_new_v1","inner","auth_context_id","task_id","created_at","last_updated_at","ttl_ms","poll_ms","request_id_json","progress_token_json","tool_name","args_json"]]],["result_bytes.ok",["std.mcp.sandbox.task_store_any_v1._wrap_v1","k",["bytes.view","inner2"]]]],"kind":"defn","name":"std.mcp.sandbox.task_store_any_v1.put_tool_task_new_v1","params":[{"name":"store","ty":"bytes"},{"name":"auth_context_id","ty":"bytes_view"},{"name":"task_id","ty":"bytes_view"},{"name":"created_at","ty":"bytes_view"},{"name":"last_updated_at","ty":"bytes_view"},{"name":"ttl_ms","ty":"i32"},{"name":"poll_ms","ty":"i32"},{"name":"tool_name","ty":"bytes_view"},{"name":"args_json","ty":"bytes_view"},{"name":"request_id_json","ty":"bytes_view"},{"name":"progress_token_json","ty":"bytes_view"}],"result":"result_bytes"},{"body":["begin",["let","sv",["bytes.view","store"]],["let","k",["std.mcp.sandbox.task_store_any_v1._kind_v1","sv"]],["let","inner",["std.mcp.sandbox.task_store_any_v1._inner_bytes_v1","sv"]],["let","res",["if",["=","k",1],["std.mcp.sandbox.task_store_sqlite_v1.set_task_cancelled_v1","inner","auth_context_id","task_id","last_updated_at","cancel_jsonrpc_error"],["std.mcp.sandbox.task_store_mem_v1.set_task_cancelled_v1","inner","auth_context_id","task_id","last_updated_at","cancel_jsonrpc_error"]]],["if",["!=",["result_bytes.err_code","res"],0],["return","res"],0],["let","inner2",["result_bytes.unwrap_or","res",["bytes.alloc",0]]],["result_bytes.ok",["std.mcp.sandbox.task_store_any_v1._wrap_v1","k",["bytes.view","inner2"]]]],"kind":"defn","name":"std.mcp.sandbox.task_store_any_v1.set_task_cancelled_v1","params":[{"name":"store","ty":"bytes"},{"name":"auth_context_id","ty":"bytes_view"},{"name":"task_id","ty":"bytes_view"},{"name":"last_updated_at","ty":"bytes_view"},{"name":"cancel_jsonrpc_error","ty":"bytes_view"}],"result":"result_bytes"},{"body":["begin",["let","sv",["bytes.view","store"]],["let","k",["std.mcp.sandbox.task_store_any_v1._kind_v1","sv"]],["let","inner",["std.mcp.sandbox.task_store_any_v1._inner_bytes_v1","sv"]],["let","res",["if",["=","k",1],["std.mcp.sandbox.task_store_sqlite_v1.set_task_completed_v1","inner","auth_context_id","task_id","last_updated_at","result_json"],["std.mcp.sandbox.task_store_mem_v1.set_task_completed_v1","inner","auth_context_id","task_id","last_updated_at","result_json"]]],["if",["!=",["result_bytes.err_code","res"],0],["return","res"],0],["let","inner2",["result_bytes.unwrap_or","res",["bytes.alloc",0]]],["result_bytes.ok",["std.mcp.sandbox.task_store_any_v1._wrap_v1","k",["bytes.view","inner2"]]]],"kind":"defn","name":"std.mcp.sandbox.task_store_any_v1.set_task_completed_v1","params":[{"name":"store","ty":"bytes"},{"name":"auth_context_id","ty":"bytes_view"},{"name":"task_id","ty":"bytes_view"},{"name":"last_updated_at","ty":"bytes_view"},{"name":"result_json","ty":"bytes_view"}],"result":"result_bytes"},{"body":["begin",["let","sv",["bytes.view","store"]],["let","k",["std.mcp.sandbox.task_store_any_v1._kind_v1","sv"]],["let","inner",["std.mcp.sandbox.task_store_any_v1._inner_bytes_v1","sv"]],["let","res",["if",["=","k",1],["std.mcp.sandbox.task_store_sqlite_v1.set_task_failed_with_result_v1","inner","auth_context_id","task_id","last_updated_at","status_message","result_json"],["std.mcp.sandbox.task_store_mem_v1.set_task_failed_with_result_v1","inner","auth_context_id","task_id","last_updated_at","status_message","result_json"]]],["if",["!=",["result_bytes.err_code","res"],0],["return","res"],0],["let","inner2",["result_bytes.unwrap_or","res",["bytes.alloc",0]]],["result_bytes.ok",["std.mcp.sandbox.task_store_any_v1._wrap_v1","k",["bytes.view","inner2"]]]],"kind":"defn","name":"std.mcp.sandbox.task_store_any_v1.set_task_failed_with_result_v1","params":[{"name":"store","ty":"bytes"},{"name":"auth_context_id","ty":"bytes_view"},{"name":"task_id","ty":"bytes_view"},{"name":"last_updated_at","ty":"bytes_view"},{"name":"status_message","ty":"bytes_view"},{"name":"result_json","ty":"bytes_view"}],"result":"result_bytes"},{"body":["begin",["let","sv",["bytes.view","store"]],["let","k",["std.mcp.sandbox.task_store_any_v1._kind_v1","sv"]],["let","inner",["std.mcp.sandbox.task_store_any_v1._inner_bytes_v1","sv"]],["let","res",["if",["=","k",1],["std.mcp.sandbox.task_store_sqlite_v1.set_task_working_step_v1","inner","auth_context_id","task_id","last_updated_at","step","total"],["std.mcp.sandbox.task_store_mem_v1.set_task_working_step_v1","inner","auth_context_id","task_id","last_updated_at","step","total"]]],["if",["!=",["result_bytes.err_code","res"],0],["return","res"],0],["let","inner2",["result_bytes.unwrap_or","res",["bytes.alloc",0]]],["result_bytes.ok",["std.mcp.sandbox.task_store_any_v1._wrap_v1","k",["bytes.view","inner2"]]]],"kind":"defn","name":"std.mcp.sandbox.task_store_any_v1.set_task_working_step_v1","params":[{"name":"store","ty":"bytes"},{"name":"auth_context_id","ty":"bytes_view"},{"name":"task_id","ty":"bytes_view"},{"name":"last_updated_at","ty":"bytes_view"},{"name":"step","ty":"i32"},{"name":"total","ty":"i32"}],"result":"result_bytes"}],"imports":["std.bytes","std.codec","std.mcp.sandbox.task_store_mem_v1","std.mcp.sandbox.task_store_sqlite_v1"],"kind":"module","module_id":"std.mcp.sandbox.task_store_any_v1","schema_version":"x07.x07ast@0.5.0"}
