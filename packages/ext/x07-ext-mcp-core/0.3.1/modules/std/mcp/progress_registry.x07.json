{"decls":[{"kind":"export","names":["std.mcp.progress_registry.scoped_key_v1","std.mcp.progress_registry.token_key_v1","std.mcp.progress_registry.token_validate_v1"]},{"body":["begin",["let","key",["std.mcp.progress_registry.token_key_v1","progress_token_json"]],["if",["=",["bytes.len",["bytes.view","key"]],0],["return",["bytes.alloc",0]],0],["let","sep",["bytes.alloc",1]],["set","sep",["bytes.set_u8","sep",0,0]],["let","p",["std.bytes.concat","auth_context_id",["bytes.view","sep"]]],["std.bytes.concat",["bytes.view","p"],["bytes.view","key"]]],"kind":"defn","name":"std.mcp.progress_registry.scoped_key_v1","params":[{"name":"auth_context_id","ty":"bytes_view"},{"name":"progress_token_json","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["let","v",["std.mcp.progress_registry.token_validate_v1","progress_token_json"]],["if",["=","v",1],["ext.json.canon.canonicalize","progress_token_json"],["bytes.alloc",0]]],"kind":"defn","name":"std.mcp.progress_registry.token_key_v1","params":[{"name":"progress_token_json","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["if",["=",["view.len","progress_token_json"],0],["return",0],0],["let","doc_b",["ext.json.data_model.parse","progress_token_json"]],["let","doc",["bytes.view","doc_b"]],["if",["=",["ext.data_model.doc_is_err","doc"],1],["return",-1],0],["let","k",["ext.data_model.root_kind","doc"]],["if",["|",["=","k",2],["=","k",3]],1,-1]],"kind":"defn","name":"std.mcp.progress_registry.token_validate_v1","params":[{"name":"progress_token_json","ty":"bytes_view"}],"result":"i32"}],"imports":["ext.data_model","ext.json.canon","ext.json.data_model","std.bytes"],"kind":"module","module_id":"std.mcp.progress_registry","schema_version":"x07.x07ast@0.5.0"}
