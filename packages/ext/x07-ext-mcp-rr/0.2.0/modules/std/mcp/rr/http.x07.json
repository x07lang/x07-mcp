{"decls":[{"kind":"export","names":["std.mcp.rr.http.replay_from_fs_v1"]},{"body":["begin",["let","raw",["std.fs.read","session_path"]],["let","doc_b",["ext.json.data_model.parse",["bytes.view","raw"]]],["let","doc",["bytes.view","doc_b"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","doc"],0,["std.test.code_assert_i32_eq"]]],["let","root",["ext.data_model.root_offset","doc"]],["let","k_schema",["bytes.lit","schema_version"]],["let","schema_off",["ext.data_model.map_find","doc","root",["bytes.view","k_schema"]]],["try",["std.test.assert_i32_eq",[">=","schema_off",0],1,["std.test.code_assert_i32_eq"]]],["let","schema_val",["ext.data_model.string_get","doc","schema_off"]],["let","want_a",["bytes.lit","x07.mcp.rr.http_session@0.1.0"]],["let","want_b",["bytes.lit","x07.mcp.rr.http-session@0.1.0"]],["let","schema_ok",0],["if",["=",["bytes.eq",["bytes.view","schema_val"],["bytes.view","want_a"]],1],["set","schema_ok",1],0],["if",["=",["bytes.eq",["bytes.view","schema_val"],["bytes.view","want_b"]],1],["set","schema_ok",1],0],["try",["std.test.assert_i32_eq","schema_ok",1,["std.test.code_assert_i32_eq"]]],["let","k_steps",["bytes.lit","steps"]],["let","steps_off",["ext.data_model.map_find","doc","root",["bytes.view","k_steps"]]],["try",["std.test.assert_i32_eq",[">=","steps_off",0],1,["std.test.code_assert_i32_eq"]]],["let","n",["ext.data_model.seq_len","doc","steps_off"]],["try",["std.test.assert_i32_eq",[">","n",0],1,["std.test.code_assert_i32_eq"]]],["for","i",0,"n",["begin",["let","step_off",["ext.data_model.seq_get","doc","steps_off","i"]],["try",["std.test.assert_i32_eq",[">=","step_off",0],1,["std.test.code_assert_i32_eq"]]],["let","k_req",["bytes.lit","req"]],["let","k_res",["bytes.lit","res"]],["let","req_off",["ext.data_model.map_find","doc","step_off",["bytes.view","k_req"]]],["let","res_off",["ext.data_model.map_find","doc","step_off",["bytes.view","k_res"]]],["try",["std.test.assert_i32_eq",[">=","req_off",0],1,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_i32_eq",[">=","res_off",0],1,["std.test.code_assert_i32_eq"]]],0]],["std.test.pass"]],"kind":"defn","name":"std.mcp.rr.http.replay_from_fs_v1","params":[{"name":"session_path","ty":"bytes_view"}],"result":"result_i32"}],"imports":["ext.data_model","ext.json.data_model","std.fs","std.test"],"kind":"module","module_id":"std.mcp.rr.http","schema_version":"x07.x07ast@0.5.0"}
