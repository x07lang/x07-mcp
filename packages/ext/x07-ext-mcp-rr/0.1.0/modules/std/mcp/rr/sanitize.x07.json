{"decls":[{"kind":"export","names":["std.mcp.rr.sanitize.sanitize_jsonl_v1"]},{"body":["begin",["let","n",["view.len","raw_jsonl"]],["if",["=","n",0],["return",["bytes.alloc",0]],0],["let","had_trailing_nl",["if",["=",["view.get_u8","raw_jsonl",["-","n",1]],10],1,0]],["let","out",["vec_u8.with_capacity",["+","n",16]]],["let","start",0],["for","i",0,"n",["if",["=",["view.get_u8","raw_jsonl","i"],10],["begin",["let","line_v",["view.slice","raw_jsonl","start",["-","i","start"]]],["let","canon",["ext.json.canon.canonicalize","line_v"]],["if",[">",["std.bytes.len","canon"],0],["set","out",["vec_u8.extend_bytes","out",["bytes.view","canon"]]],["set","out",["vec_u8.extend_bytes","out","line_v"]]],["set","out",["vec_u8.push","out",10]],["set","start",["+","i",1]],0],0]],["if",["<","start","n"],["begin",["let","line_v",["view.slice","raw_jsonl","start",["-","n","start"]]],["let","canon",["ext.json.canon.canonicalize","line_v"]],["if",[">",["std.bytes.len","canon"],0],["set","out",["vec_u8.extend_bytes","out",["bytes.view","canon"]]],["set","out",["vec_u8.extend_bytes","out","line_v"]]],["if",["=","had_trailing_nl",1],["begin",["set","out",["vec_u8.push","out",10]],0],0],0],0],["vec_u8.into_bytes","out"]],"kind":"defn","name":"std.mcp.rr.sanitize.sanitize_jsonl_v1","params":[{"name":"raw_jsonl","ty":"bytes_view"}],"result":"bytes"}],"imports":["ext.json.canon","std.bytes"],"kind":"module","module_id":"std.mcp.rr.sanitize","schema_version":"x07.x07ast@0.5.0"}