{"decls":[{"kind":"export","names":["std.mcp.auth.prm.build_doc_v1","std.mcp.auth.prm.build_prm_doc_v1"]},{"body":["begin",["let","off",["ext.data_model.map_find","doc","root","key"]],["if",["<","off",0],["return",["view.to_bytes","default_json"]],0],["if",["!=",["ext.data_model.kind_at","doc","off"],4],["return",["view.to_bytes","default_json"]],0],["let","end",["ext.data_model.skip_value","doc","off"]],["if",["<","end",0],["return",["view.to_bytes","default_json"]],0],["let","val",["view.to_bytes",["view.slice","doc","off",["-","end","off"]]]],["let","json",["std.mcp.util.json.json_from_value_v1",["bytes.view","val"]]],["if",[">",["bytes.len","json"],0],"json",["view.to_bytes","default_json"]]],"kind":"defn","name":"std.mcp.auth.prm._array_json_or_default_v1","params":[{"name":"doc","ty":"bytes_view"},{"name":"root","ty":"i32"},{"name":"key","ty":"bytes_view"},{"name":"default_json","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["let","k_auth_servers",["bytes.lit","authorization_servers"]],["let","k_scopes_supported",["bytes.lit","scopes_supported"]],["let","k_bearer_methods_supported",["bytes.lit","bearer_methods_supported"]],["let","frag_resource",["bytes.lit","{\"resource\":"]],["let","frag_auth_servers",["bytes.lit",",\"authorization_servers\":"]],["let","frag_scopes",["bytes.lit",",\"scopes_supported\":"]],["let","frag_methods",["bytes.lit",",\"bearer_methods_supported\":"]],["let","frag_end",["bytes.lit","}"]],["let","auth_servers_json",["bytes.lit","[\"https://auth.example.com\"]"]],["let","scopes_json",["bytes.lit","[\"mcp:tools\"]"]],["let","methods_json",["bytes.lit","[\"header\"]"]],["let","resource_val",["ext.data_model.value_string","resource"]],["let","resource_json",["std.mcp.util.json.json_from_value_v1",["bytes.view","resource_val"]]],["if",["=",["bytes.len","resource_json"],0],["return",["bytes.alloc",0]],0],["let","doc_b",["ext.json.data_model.parse","oauth_doc_json"]],["let","doc",["bytes.view","doc_b"]],["if",["=",["ext.data_model.doc_is_err","doc"],0],["begin",["if",["=",["ext.data_model.root_kind","doc"],5],["begin",["let","root",["ext.data_model.root_offset","doc"]],["set","auth_servers_json",["std.mcp.auth.prm._array_json_or_default_v1","doc","root",["bytes.view","k_auth_servers"],["bytes.view","auth_servers_json"]]],["set","scopes_json",["std.mcp.auth.prm._array_json_or_default_v1","doc","root",["bytes.view","k_scopes_supported"],["bytes.view","scopes_json"]]],["set","methods_json",["std.mcp.auth.prm._array_json_or_default_v1","doc","root",["bytes.view","k_bearer_methods_supported"],["bytes.view","methods_json"]]],0],0]],0],["let","out",["vec_u8.with_capacity",512]],["set","out",["vec_u8.extend_bytes","out",["bytes.view","frag_resource"]]],["set","out",["vec_u8.extend_bytes","out",["bytes.view","resource_json"]]],["set","out",["vec_u8.extend_bytes","out",["bytes.view","frag_auth_servers"]]],["set","out",["vec_u8.extend_bytes","out",["bytes.view","auth_servers_json"]]],["set","out",["vec_u8.extend_bytes","out",["bytes.view","frag_scopes"]]],["set","out",["vec_u8.extend_bytes","out",["bytes.view","scopes_json"]]],["set","out",["vec_u8.extend_bytes","out",["bytes.view","frag_methods"]]],["set","out",["vec_u8.extend_bytes","out",["bytes.view","methods_json"]]],["set","out",["vec_u8.extend_bytes","out",["bytes.view","frag_end"]]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"std.mcp.auth.prm.build_doc_v1","params":[{"name":"oauth_doc_json","ty":"bytes_view"},{"name":"resource","ty":"bytes_view"}],"result":"bytes"},{"body":["std.mcp.auth.prm.build_doc_v1","oauth_doc_json","resource"],"kind":"defn","name":"std.mcp.auth.prm.build_prm_doc_v1","params":[{"name":"oauth_doc_json","ty":"bytes_view"},{"name":"resource","ty":"bytes_view"}],"result":"bytes"}],"imports":["ext.data_model","ext.json.data_model","std.mcp.util.json"],"kind":"module","module_id":"std.mcp.auth.prm","schema_version":"x07.x07ast@0.5.0"}
