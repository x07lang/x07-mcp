{"decls":[{"kind":"export","names":["std.mcp.auth.http_middleware_v1.wrap_mcp_http_handler_with_oauth2_v1"]},{"body":["begin",["let","doc",["ext.data_model.doc_ok","value"]],["let","json_doc",["ext.data_model.json.emit_canon",["bytes.view","doc"]]],["let","jv",["bytes.view","json_doc"]],["if",["=",["ext.data_model.doc_is_err","jv"],1],["return",["bytes.alloc",0]],0],["let","n",["view.len","jv"]],["if",["<u","n",2],["return",["bytes.alloc",0]],0],["view.to_bytes",["view.slice","jv",1,["-","n",1]]]],"kind":"defn","name":"std.mcp.auth.http_middleware_v1._json_from_value_v1","params":[{"name":"value","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["let","k_handler",["bytes.lit","handler_id"]],["let","k_rs",["bytes.lit","rs_pack_json"]],["let","v_handler",["ext.data_model.value_string","handler_id"]],["let","v_rs",["ext.data_model.value_string","rs_pack"]],["let","entries",["vec_u8.with_capacity",512]],["set","entries",["vec_u8.extend_bytes","entries",["codec.write_u32_le",2]]],["set","entries",["vec_u8.extend_bytes","entries",["codec.write_u32_le",["bytes.len",["bytes.view","k_handler"]]]]],["set","entries",["vec_u8.extend_bytes","entries",["bytes.view","k_handler"]]],["set","entries",["vec_u8.extend_bytes","entries",["codec.write_u32_le",["bytes.len",["bytes.view","v_handler"]]]]],["set","entries",["vec_u8.extend_bytes","entries",["bytes.view","v_handler"]]],["set","entries",["vec_u8.extend_bytes","entries",["codec.write_u32_le",["bytes.len",["bytes.view","k_rs"]]]]],["set","entries",["vec_u8.extend_bytes","entries",["bytes.view","k_rs"]]],["set","entries",["vec_u8.extend_bytes","entries",["codec.write_u32_le",["bytes.len",["bytes.view","v_rs"]]]]],["set","entries",["vec_u8.extend_bytes","entries",["bytes.view","v_rs"]]],["let","entries_b",["vec_u8.into_bytes","entries"]],["let","map_val",["ext.data_model.value_map_from_entries",["bytes.view","entries_b"]]],["std.mcp.auth.http_middleware_v1._json_from_value_v1",["bytes.view","map_val"]]],"kind":"defn","name":"std.mcp.auth.http_middleware_v1.wrap_mcp_http_handler_with_oauth2_v1","params":[{"name":"handler_id","ty":"bytes_view"},{"name":"rs_pack","ty":"bytes_view"}],"result":"bytes"}],"imports":["ext.data_model","ext.data_model.json","ext.json.data_model","std.bytes","std.codec"],"kind":"module","module_id":"std.mcp.auth.http_middleware_v1","schema_version":"x07.x07ast@0.5.0"}
