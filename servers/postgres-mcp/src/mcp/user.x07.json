{"decls":[{"kind":"export","names":["mcp.user.call_tool_v1"]},{"body":["begin",["let","t1",["bytes.lit","db.ping"]],["let","t2",["bytes.lit","db.query"]],["let","t3",["bytes.lit","test_tool_with_progress"]],["let","diag_invalid_args",["std.mcp.diag.code_invalid_args_v1"]],["let","ok1",["bytes.lit","db_ping_ok"]],["let","ok2",["bytes.lit","db_query_ok"]],["let","ok3",["bytes.lit","test_tool_with_progress_ok"]],["let","err_text",["bytes.lit","unknown tool"]],["let","err_detail",["bytes.lit","{}"]],["if",["=",["bytes.eq","tool_name",["bytes.view","t1"]],1],["return",["std.mcp.tool.result.ok_text_v1",["bytes.view","ok1"]]],0],["if",["=",["bytes.eq","tool_name",["bytes.view","t2"]],1],["return",["std.mcp.tool.result.ok_text_v1",["bytes.view","ok2"]]],0],["if",["=",["bytes.eq","tool_name",["bytes.view","t3"]],1],["begin",["let","empty_msg",["bytes.alloc",0]],["std.mcp.toolkit.toolctx.progress_emit_v1","ctx_json",0,100,["bytes.view","empty_msg"]],["std.mcp.toolkit.toolctx.progress_emit_v1","ctx_json",50,100,["bytes.view","empty_msg"]],["std.mcp.toolkit.toolctx.progress_emit_v1","ctx_json",100,100,["bytes.view","empty_msg"]],["return",["std.mcp.tool.result.ok_text_v1",["bytes.view","ok3"]]],0],0],["std.mcp.tool.result.err_v1",["bytes.view","diag_invalid_args"],["bytes.view","err_text"],["bytes.view","err_detail"]]],"kind":"defn","name":"mcp.user.call_tool_v1","params":[{"name":"tool_name","ty":"bytes_view"},{"name":"ctx_json","ty":"bytes_view"},{"name":"args_json","ty":"bytes_view"}],"result":"bytes"}],"imports":["std.mcp.diag","std.mcp.tool.result","std.mcp.toolkit.toolctx"],"kind":"module","module_id":"mcp.user","schema_version":"x07.x07ast@0.5.0"}
