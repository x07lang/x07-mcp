{
  "schema_version": "x07.mcp.server_config@0.3.0",

  "server": {
    "name": "mcp-server-http-tasks-template",
    "version": "0.1.0",
    "protocolVersion": "2025-11-25"
  },

  "auth": {
    "mode": "oauth2",
    "oauth_config_path": "mcp.oauth.json",
    "required_scopes": ["mcp:tools"],
    "required_scopes_tasks": ["mcp:tasks"]
  },

  "transports": {
    "http": {
      "enabled": true,
      "bind": "127.0.0.1:8080",
      "path": "/mcp",
      "origin_allow_missing": true,
      "origin_allowlist": ["http://localhost:*", "http://127.0.0.1:*"],
      "streamable": {
        "enabled": true,
        "sse": {
          "enabled": true,
          "max_connections": 64
        }
      }
    }
  },

  "capabilities": {
    "tools": { "listChanged": false },
    "tasks": {
      "list": {},
      "cancel": {},
      "requests": { "tools": { "call": {} } }
    }
  },

  "tools": {
    "descriptor_path": "mcp.tools.json"
  },

  "worker_exe_path": "out/mcp-worker",

  "observability": {
    "clock": {
      "mode": "fixed",
      "utc": "2026-02-14T00:00:00Z"
    },
    "logging": {
      "enabled": true,
      "declare_capability": true,
      "default_client_level": "error",
      "client_level_floor": "notice",
      "rate_limit_per_sec": 25,
      "max_data_bytes": 16384,
      "emit": { "tool_start": true, "tool_finish": true },
      "redaction": {
        "redact_keys": [
          "authorization",
          "cookie",
          "set-cookie",
          "password",
          "secret",
          "token",
          "apiKey"
        ],
        "redact_patterns": ["(?i)bearer\\s+[A-Za-z0-9._-]+"],
        "redacted_value": "<redacted>"
      }
    },
    "audit": {
      "enabled": true,
      "sinks": [{ "kind": "stderr_jsonl_v1" }, { "kind": "rr_sidecar_v1" }],
      "allow_tool_tags": ["cache.hit"]
    },
    "metrics": {
      "enabled": true,
      "export": { "kind": "otlp_http_v1", "arch_exporter_id": "otlp_local_v1" },
      "flush_interval_ms": 5000
    }
  },

  "tasks": {
    "enabled": true,

    "defaults": {
      "ttl_ms": 60000,
      "poll_interval_ms": 100
    },

    "id": {
      "mode": "deterministic",
      "deterministic": { "prefix": "task_", "start": 1 }
    },

    "clock": {
      "mode": "fixed",
      "fixed": {
        "start_iso8601": "2026-02-14T00:00:00Z",
        "step_ms": 1000
      }
    },

    "executor": {
      "mode": "deterministic",
      "deterministic": {
        "complete_after_ticks": 3,
        "advance_on": ["tasks/get", "tasks/list", "tasks/result"]
      }
    },

    "retention": {
      "max_tasks": 1000
    }
  },

  "sandbox": {
    "per_tool": {
      "enabled": true,
      "policy_path": "policy/tool.sandbox.json"
    }
  }
}
