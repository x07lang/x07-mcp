{"decls":[{"kind":"export","names":["tools.hello.echo_v1","tools.hello.wait_required_v1","tools.hello.wait_v1"]},{"body":["begin",["let","doc_b",["ext.json.data_model.parse","args_json"]],["let","doc",["bytes.view","doc_b"]],["if",["=",["ext.data_model.doc_is_err","doc"],1],["return",-1],0],["if",["!=",["ext.data_model.root_kind","doc"],5],["return",-1],0],["let","root",["ext.data_model.root_offset","doc"]],["let","k_steps",["bytes.lit","steps"]],["let","steps_off",["ext.data_model.map_find","doc","root",["bytes.view","k_steps"]]],["if",["<","steps_off",0],["return",-1],0],["if",["!=",["ext.data_model.kind_at","doc","steps_off"],2],["return",-1],0],["let","num_b",["ext.data_model.number_get","doc","steps_off"]],["let","st",["std.parse.i32_status_le",["bytes.view","num_b"]]],["if",["if",[">=u",["bytes.len","st"],5],["=",["bytes.get_u8","st",0],1],0],["codec.read_u32_le","st",1],-1]],"kind":"defn","name":"tools.hello._steps_from_args_v1","params":[{"name":"args_json","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","_","args_json"],["let","text",["bytes.lit","hello.echo: ok"]],["std.mcp.tool.result.ok_text_v1",["bytes.view","text"]]],"kind":"defn","name":"tools.hello.echo_v1","params":[{"name":"args_json","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["let","steps",["tools.hello._steps_from_args_v1","args_json"]],["if",["<","steps",1],["return",["bytes.lit","{\"content\":[{\"type\":\"text\",\"text\":\"invalid args\"}],\"isError\":true}"]],0],["let","pfx",["bytes.lit","waited "]],["let","sfx",["bytes.lit"," steps (required)"]],["let","steps_dec",["std.fmt.s32_to_dec","steps"]],["let","t1",["std.bytes.concat",["bytes.view","pfx"],["bytes.view","steps_dec"]]],["let","msg",["std.bytes.concat",["bytes.view","t1"],["bytes.view","sfx"]]],["std.mcp.tool.result.ok_text_v1",["bytes.view","msg"]]],"kind":"defn","name":"tools.hello.wait_required_v1","params":[{"name":"args_json","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["let","steps",["tools.hello._steps_from_args_v1","args_json"]],["if",["<","steps",1],["return",["bytes.lit","{\"content\":[{\"type\":\"text\",\"text\":\"invalid args\"}],\"isError\":true}"]],0],["let","pfx",["bytes.lit","waited "]],["let","sfx",["bytes.lit"," steps"]],["let","steps_dec",["std.fmt.s32_to_dec","steps"]],["let","t1",["std.bytes.concat",["bytes.view","pfx"],["bytes.view","steps_dec"]]],["let","msg",["std.bytes.concat",["bytes.view","t1"],["bytes.view","sfx"]]],["std.mcp.tool.result.ok_text_v1",["bytes.view","msg"]]],"kind":"defn","name":"tools.hello.wait_v1","params":[{"name":"args_json","ty":"bytes_view"}],"result":"bytes"}],"imports":["ext.data_model","ext.json.data_model","std.bytes","std.codec","std.fmt","std.mcp.tool.result","std.parse"],"kind":"module","module_id":"tools.hello","schema_version":"x07.x07ast@0.5.0"}
